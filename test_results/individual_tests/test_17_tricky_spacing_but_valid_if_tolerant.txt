=== Running Valgrind Memory Error Test ===
Scene: scenes/miniRT_samples/17_tricky_spacing_but_valid_if_tolerant.rt
=========================================
Running valgrind on miniRT with scene: scenes/miniRT_samples/17_tricky_spacing_but_valid_if_tolerant.rt

=== Valgrind Summary ===
Full output saved to: valgrind_output.txt
Checking for memory errors and leaks...
✅ No definite leaks detected
✅ No indirect leaks detected
✅ No possible leaks detected
✅ No invalid reads detected
✅ No invalid writes detected
✅ No uninitialized values detected
✅ No conditional jumps on uninitialized values detected

=== Error Summary ===
Valgrind Error Summary:
==34177== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)
==34177== 
==34177== 1 errors in context 1 of 1:
==34177== Invalid free() / delete / delete[] / realloc()
==34177==    at 0x4867AD0: free (in /usr/libexec/valgrind/vgpreload_memcheck-arm64-linux.so)
==34177==    by 0x111B87: parse_color_tokens (parse_tokens.c:76)
==34177==    by 0x1136C3: parse_ambient_color (parse_scene_utils3.c:18)
==34177==    by 0x1112FF: parse_ambient (parse_scene_elements.c:28)
==34177==    by 0x113B57: dispatch_and_return (parser_utils2.c:45)
==34177==    by 0x113D8F: dispatch_parse (parser.c:23)
==34177==    by 0x113FBF: parse_line (parser.c:54)
--
==34177== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)

=== Debug Information ===
For detailed error analysis, run:
  ./debug_error.sh valgrind_output.txt

Quick error summary:
- Invalid free detected in free_scene function

=== Test Complete ===
